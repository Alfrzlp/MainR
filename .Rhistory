119 Lingga 5,00 12,88 26,77 0,78 23,34 61,75 3,97 7,11 16,49 2
120 Kepulauan Anambas 5,00 6,44 17,62 0,42 40,74 67,06 1,51 7,07 - 3"
prov <- list(
Aceh = Aceh,
'Sumatera Utara' = Sumut,
Sumbar,
Riau,
Jambi,
Sumsel,
Bengkulu,
Lampung,
Babel,
Kepri
)
data1 <- lapply(
seq_along(prov),
function (i){
dm::read_pattern(
prov[[i]], pos_non_angka = 2, pos_angka = c(1, 3:12)
) %>%
mutate(
Prov = names(prov)[[i]],
.before = v2
) %>%
mutate(
v11 = str_replace_all(v11, '-', 'NA')
) %>%
mutate_at(vars(v3:v11), ~str_replace_all(.x, ',', '\\.')) %>%
mutate(
provno = kompilasi_data$provno[kompilasi_data$provinsi == names(prov)[[i]]][1],
.before = Prov
) %>%
rename(
kabkot = v2
) %>%
type_convert()
}
) %>%
do.call(rbind, .)
kompilasi_data <- readxl::read_xlsx('D:/Downloads/Kompilasi Data.xlsx')
kompilasi_data <- readxl::read_xlsx('D:/Kompilasi Data.xlsx')
kompilasi_data <- readxl::read_xlsx('E:/Kompilasi Data.xlsx')
kompilasi_data <-
kompilasi_data %>%
janitor::clean_names() %>%
mutate(
kabkot = str_to_title(kabkot),
provinsi = str_to_title(provinsi),
)
head(kompilasi_data)
prov <- list(
Aceh = Aceh,
'Sumatera Utara' = Sumut,
Sumbar,
Riau,
Jambi,
Sumsel,
Bengkulu,
Lampung,
Babel,
Kepri
)
data1 <- lapply(
seq_along(prov),
function (i){
dm::read_pattern(
prov[[i]], pos_non_angka = 2, pos_angka = c(1, 3:12)
) %>%
mutate(
Prov = names(prov)[[i]],
.before = v2
) %>%
mutate(
v11 = str_replace_all(v11, '-', 'NA')
) %>%
mutate_at(vars(v3:v11), ~str_replace_all(.x, ',', '\\.')) %>%
mutate(
provno = kompilasi_data$provno[kompilasi_data$provinsi == names(prov)[[i]]][1],
.before = Prov
) %>%
rename(
kabkot = v2
) %>%
type_convert()
}
) %>%
do.call(rbind, .)
data1
# remotes::install_github('alfrzlp/package-dm@no-ocr')
dm::read_pattern
read_pattern <- function (s, pos_non_angka = NULL, pos_angka = NULL, col_names = paste0("v",
1:length(c(pos_non_angka, pos_angka))), sep = "\\s",
pattern = NULL, ...)
{
args <- is.numeric(pos_non_angka) + is.numeric(pos_angka)
ak <- "(-*\\d*,*\\.*\\d*|\\d*)"
non_ak <- "(\\X*)"
if (is.null(pattern) & args == 2) {
pattern <- c()
pattern[pos_angka] <- ak
pattern[pos_non_angka] <- non_ak
pattern <- paste0(pattern, collapse = sep)
}
else if (!is.null(pattern) & args == 0) {
pattern <- gsub("(?<=\\()\\s*angka", "-*\\\\d*,*\\\\.*\\\\d*|\\\\d*",
pattern, ignore.case = T, perl = T)
pattern <- gsub("(?<=\\()\\s*non_*\\s*angka", "\\\\X*",
pattern, ignore.case = T, perl = T)
}
else {
warning("Silahkan isi `pos_non_angka` dan `pos_angka` dengan numeric vector. jika anda ingin custom silakan isi `pattern` dan biarkan kosong `pos_non_angka` dan `pos_angka`")
}
tidyr::extract(data.frame(st = stringr::str_trim(stringr::str_split(s,
pattern = "\\n")[[1]])), col = 1, into = col_names,
regex = pattern, ...)
}
data1 <- lapply(
seq_along(prov),
function (i){
read_pattern(
prov[[i]], pos_non_angka = 2, pos_angka = c(1, 3:12)
) %>%
mutate(
Prov = names(prov)[[i]],
.before = v2
) %>%
mutate(
v11 = str_replace_all(v11, '-', 'NA')
) %>%
mutate_at(vars(v3:v11), ~str_replace_all(.x, ',', '\\.')) %>%
mutate(
provno = kompilasi_data$provno[kompilasi_data$provinsi == names(prov)[[i]]][1],
.before = Prov
) %>%
rename(
kabkot = v2
) %>%
type_convert()
}
) %>%
do.call(rbind, .)
data1 <- lapply(
seq_along(prov),
function (i){
read_pattern(
prov[[i]], pos_non_angka = 2, pos_angka = c(1, 3:12)
) %>%
mutate(
Prov = names(prov)[[i]],
.before = v2
) %>%
mutate(
v11 = str_replace_all(v11, '-', 'NA')
) %>%
mutate_at(vars(v3:v11), ~str_replace_all(.x, ',', '\\.')) %>%
mutate(
provno = kompilasi_data$provno[kompilasi_data$provinsi == names(prov)[[i]]][1],
.before = Prov
) %>%
rename(
kabkot = v2
) %>%
type_convert()
}
) %>%
do.call(rbind, .)
data1
view(data1)
s <- '1 Aceh 792 232 1.024 45 1.069
2 Sumatera Utara 608 107 715 50 765
3 Sumatera Barat 559 220 779 158 937
4 Riau 494 102 596 36 632
5 Jambi 313 40 353 7 360
6 Sumatera Selatan 454 82 536 44 580
7 Bengkulu 212 51 263 32 295
8 Lampung 473 69 542 19 561
9 Kepulauan Bangka Belitung 135 51 186 27 213
10 Kepulauan Riau 182 47 229 21 250
11 DKI Jakarta 300 89 389 66 455
12 Jawa Barat 2.252 514 2.766 193 2.959
13 Jawa Tengah 3.031 1.158 4.189 645 4.834
14 D I Yogyakarta 211 71 282 42 324
15 Jawa Timur 2.954 657 3.611 253 3.864
16 Banten 912 209 1.121 109 1.230
17 Bali 238 99 337 46 383
18 Nusa Tenggara Barat 700 159 859 51 910
19 Nusa Tenggara Timur 729 226 955 108 1.063
20 Kalimantan Barat 547 132 679 33 712
21 Kalimantan Tengah 327 40 367 22 389
22 Kalimantan Selatan 508 115 623 58 681
23 Kalimantan Timur 525 137 662 69 731
24 Kalimantan Utara 90 39 129 17 146
25 Sulawesi Utara 40 5 45 6 51
26 Sulawesi Tengah 336 81 417 28 445
27 Sulawesi Selatan 623 168 791 52 843
28 Sulawesi Tenggara 354 102 456 46 502
29 Gorontalo 191 53 244 20 264
30 Sulawesi Barat 260 43 303 22 325
31 Maluku 223 86 309 44 353
32 Maluku Utara 219 69 288 28 316
33 Papua Barat 213 46 259 34 293
34 Papua 261 87 348 75 423
'
s <- '1 Aceh 792 232 1.024 45 1.069
2 Sumatera Utara 608 107 715 50 765
3 Sumatera Barat 559 220 779 158 937
4 Riau 494 102 596 36 632
5 Jambi 313 40 353 7 360
6 Sumatera Selatan 454 82 536 44 580
7 Bengkulu 212 51 263 32 295
8 Lampung 473 69 542 19 561
9 Kepulauan Bangka Belitung 135 51 186 27 213
10 Kepulauan Riau 182 47 229 21 250
11 DKI Jakarta 300 89 389 66 455
12 Jawa Barat 2.252 514 2.766 193 2.959
13 Jawa Tengah 3.031 1.158 4.189 645 4.834
14 D I Yogyakarta 211 71 282 42 324
15 Jawa Timur 2.954 657 3.611 253 3.864
16 Banten 912 209 1.121 109 1.230
17 Bali 238 99 337 46 383
18 Nusa Tenggara Barat 700 159 859 51 910
19 Nusa Tenggara Timur 729 226 955 108 1.063
20 Kalimantan Barat 547 132 679 33 712
21 Kalimantan Tengah 327 40 367 22 389
22 Kalimantan Selatan 508 115 623 58 681
23 Kalimantan Timur 525 137 662 69 731
24 Kalimantan Utara 90 39 129 17 146
25 Sulawesi Utara 40 5 45 6 51
26 Sulawesi Tengah 336 81 417 28 445
27 Sulawesi Selatan 623 168 791 52 843
28 Sulawesi Tenggara 354 102 456 46 502
29 Gorontalo 191 53 244 20 264
30 Sulawesi Barat 260 43 303 22 325
31 Maluku 223 86 309 44 353
32 Maluku Utara 219 69 288 28 316
33 Papua Barat 213 46 259 34 293
34 Papua 261 87 348 75 423'
dm::read_pattern(
s, pos_non_angka = 2,
pos_angka = c(1, 3:7)
)
dm::read_pattern(
s, pos_non_angka = 2,
pos_angka = c(1, 3:7)
) %>%
mutate_at(vars(v3:v7), ~str_replace_all(.x, '\\.', '')) %>%
type_convert()
dm::read_pattern(
s, pos_non_angka = 2,
pos_angka = c(1, 3:7)
) %>%
mutate_at(vars(v3:v7), ~str_replace_all(.x, '\\.', '')) %>%
type_convert() %>%
rename(
akb = v5
)
s1 <- '1 Aceh 114.623 88.909 2,7 2.435 2,7
2 Sumatera Utara 299.198 210.951 1,0 2.143 1,0
3 Sumatera Barat 108.653 84.559 3,0 2.576 3,0
4 Riau 155.322 131.846 1 1.007 0,8
5 Jambi 65.427 58.464 1,8 1.057 1,8
6 Sumatera Selatan 158.251 128.421 1,3 1.681 1,3
7 Bengkulu 36.917 34.146 2,5 860 2,5
8 Lampung 147.694 146.740 2,2 3.166 2,2
9 Kepulauan Bangka Belitung 27.476 26.000 4,2 1.086 4,2
10 Kepulauan Riau 40.568 36.518 3 944 2,6
11 DKI Jakarta 163.138 170.970 1,3 2.145 1,3
12 Jawa Barat 868.555 881.156 2,4 20.841 2,4
13 Jawa Tengah 522.802 537.492 4 23.974 4,5
14 D I Yogyakarta 54.020 41.007 6,1 2.510 6,1
15 Jawa Timur 562.006 559.865 3,7 20.510 3,7
16 Banten 237.844 173.990 1,9 3.331 1,9
17 Bali 64.417 63.745 3 1.805 2,8
18 Nusa Tenggara Barat 102.477 105.036 4 4.374 4,2
19 Nusa Tenggara Timur 140.603 94.258 6,9 6.501 6,9
20 Kalimantan Barat 99.378 84.019 3,5 2.982 3,5
21 Kalimantan Tengah 53.783 43.298 1,9 820 1,9
22 Kalimantan Selatan 79.621 70.511 5,7 4.002 5,7
23 Kalimantan Timur 75.011 60.439 5,2 3.144 5,2
24 Kalimantan Utara 12.146 13.144 6,3 832 6,3
25 Sulawesi Utara 40.496 32.363 2,4 786 2,4
26 Sulawesi Tengah 62.469 50.989 4 1.963 3,8
27 Sulawesi Selatan 167.083 151.314 4,2 6.353 4,2
28 Sulawesi Tenggara 62.744 44.286 3,3 1.481 3,3
29 Gorontalo 23.894 21.785 4,7 1.023 4,7
30 Sulawesi Barat 33.034 25.571 5,0 1.271 5,0
31 Maluku 44.803 28.421 1,7 490 1,7
32 Maluku Utara 29.282 21.330 3 657 3,1
33 Papua Barat 21.990 12.969 3 364 2,8
34 Papua 71.352 14.043 5 701 5,0'
dm::read_pattern(
s1, pos_non_angka = 2,
pos_angka = c(1, 3:7)
)
dm::read_pattern(
s1, pos_non_angka = 2,
pos_angka = c(1, 3:7)
) %>%
pull(v3)
dm::read_pattern(
s1, pos_non_angka = 2,
pos_angka = c(1, 3:7)
) %>%
mutate_at(vars(v3:v7), ~str_replace_all(.x, '\\.', '')) %>%
type_convert() %>%
pull(v3)
jlh <- dm::read_pattern(
s1, pos_non_angka = 2,
pos_angka = c(1, 3:7)
) %>%
mutate_at(vars(v3:v7), ~str_replace_all(.x, '\\.', '')) %>%
type_convert() %>%
pull(v3)
dm::read_pattern(
s, pos_non_angka = 2,
pos_angka = c(1, 3:7)
) %>%
mutate_at(vars(v3:v7), ~str_replace_all(.x, '\\.', '')) %>%
type_convert() %>%
rename(
akb = v5
) %>%
mutate(
jlh
)
dm::read_pattern(
s, pos_non_angka = 2,
pos_angka = c(1, 3:7)
) %>%
mutate_at(vars(v3:v7), ~str_replace_all(.x, '\\.', '')) %>%
type_convert() %>%
rename(
jkb = v5
) %>%
mutate(
jlh,
akb = jkb/jlh
)
dm::read_pattern(
s, pos_non_angka = 2,
pos_angka = c(1, 3:7)
) %>%
mutate_at(vars(v3:v7), ~str_replace_all(.x, '\\.', '')) %>%
type_convert() %>%
rename(
jkb = v5
) %>%
mutate(
jlh,
akb = jkb/jlh
) %>%
arrange(
akb
)
dm::read_pattern(
s, pos_non_angka = 2,
pos_angka = c(1, 3:7)
) %>%
mutate_at(vars(v3:v7), ~str_replace_all(.x, '\\.', '')) %>%
type_convert() %>%
rename(
jkb = v5
) %>%
mutate(
jlh,
akb = jkb*1000/jlh
) %>%
arrange(
akb,
)
# S1
V12 <- diag(sqrt(diag(S1)))
V12
# 3.11 --------------------------------------------------------------------
S1 <- matrix(c(5, 4, 4, 5), 2)
S2 <- matrix(c(5, -4, -4, 5), 2)
S3 <- diag(3, nrow = 2)
# S1
V12 <- diag(sqrt(diag(S1)))
V12
# R (atau rho, matriks korelasi)
# R = (V^1/2)^-1 sigma (V^1/2)^-1
(R <- solve(V12) %*% A %*% solve(V12))
# R (atau rho, matriks korelasi)
# R = (V^1/2)^-1 sigma (V^1/2)^-1
(R <- solve(V12) %*% S1 %*% solve(V12))
# check
V12 %*% R %*% V12
# 3.11 --------------------------------------------------------------------
S1 <- matrix(c(252.04, -68.43, -68.43, 123.67), 2)
# 3.11 --------------------------------------------------------------------
S <- matrix(c(252.04, -68.43, -68.43, 123.67), 2)
S
V12 <- diag(sqrt(diag(S)))
V12
# R (atau rho, matriks korelasi)
# R = (V^1/2)^-1 sigma (V^1/2)^-1
(R <- solve(V12) %*% S %*% solve(V12))
# check
V12 %*% R %*% V12
# 3.14 --------------------------------------------------------------------
X <- matrix(c(9, 1, 5, 3, 1, 2), nrow = 3, byrow = T)
# sample mean
X
# sample mean
X * c(2, 3)
# sample mean
X[, 1]*2
X[, 2]*3
# sample mean
X[, 1]*2 + X[, 2]*3
# sample mean
mean(X[, 1]*2 + X[, 2]*3)
# sample varians
var(X[, 1]*2 + X[, 2]*3)
# sample mean
mean(-X[, 1] + X[, 2]*2)
# sample varians
var(-X[, 1] + X[, 2]*2)
# sample covariance of b'X and c'X
cov(
X[, 1]*2 + X[, 2]*3,
-X[, 1] + X[, 2]*2
)
# sample mean
mean(-X[, 1] + X[, 2]*2)
# sample varians
var(-X[, 1] + X[, 2]*2)
# sample mean
-X[, 1] + X[, 2]*2
X[, 1]*2 + X[, 2]*3
# b'X = 2x1 + 3x2
# c'X = -x1 + 2x2
b <- matrix(c(2, 3), ncol = 1)
b
# b'X = 2x1 + 3x2
# c'X = -x1 + 2x2
b <- matrix(c(2, 3))
b
# b'X = 2x1 + 3x2
# c'X = -x1 + 2x2
b <- matrix(c(2, 3))
c <- matrix(c(-1, 2))
b
c
# b ----
xbar <- colMeans(X)
# b ----
(xbar <- colMeans(X))
# b ----
(xbar <- colMeans(X, dims = 1))
# b ----
(xbar <- colMeans(X, dims = 2))
# b ----
(xbar <- matrix(colMeans(X)))
styler::style_file()
styler::style_file('C:/Users/Ridson Alfarizal/Documents/MainR/all/APG/APG - 03.R')
styler::style_file('C:/Users/Ridson Alfarizal/Documents/MainR/all/APG/APG - 03.R')
t(c) %*% xbar
cov(X)
(S <- cov(X))
# sample covariance
t(b) %*% S %*% b
t(c) %*% S %*% c
# sample covariance
t(c) %*% S %*% b
t(b) %*% S %*% c
# 3.15 --------------------------------------------------------------------
X <- matrix(c(1, 6, 8, 4, 2, 3, 3, 6, 3), 3)
X
# b'X = x1 + x2 + x3
# c'X = x1 + 2x2 - 3x2
b <- matrix(1, nrow = 3)
b
c <- matrix(c(1, 2, -3))
c
X
X * b
X * t(b)
X[, 1] + X[, 2] + X[, 3]
# sample mean
mean(X[, 1] + X[, 2] + X[, 3])
# sample varians
var(X[, 1] + X[, 2] + X[, 3])
X[, 1] + 2*X[, 2] - 3*X[, 3]
# sample varians
var(X[, 1] + 2*X[, 2] - 3*X[, 3])
# sample varians
var(X[, 1] + 2*X[, 2] - 3*X[, 3])
# sample mean
mean(X[, 1] + 2*X[, 2] - 3*X[, 3])
# sample varians
var(X[, 1] + 2*X[, 2] - 3*X[, 3])
# sample covariance of b'X and c'X
cov(
X[, 1] + X[, 2] + X[, 3],
X[, 1] + 2*X[, 2] - 3*X[, 3]
)
# b ----
# sample mean dan varians
(xbar <- matrix(colMeans(X)))
(S <- cov(X))
# sample mean dari b'X dan c'X
t(b) %*% xbar
t(c) %*% xbar
# sample variance
t(b) %*% S %*% b
t(c) %*% S %*% c
# sample covariance
t(c) %*% S %*% b
t(b) %*% S %*% c
styler::style_file("C:/Users/Ridson Alfarizal/Documents/MainR/all/APG/APG - 03.R")
